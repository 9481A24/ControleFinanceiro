
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Controle Financeiro</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input, button {
      margin: 6px 4px 6px 0;
      padding: 14px 22px;
      font-size: 18px;
      border-radius: 6px;
      border: none;
    }
    button {
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      box-shadow: 1px 2px 4px rgba(0,0,0,0.1);
    }
    button:active {
      transform: scale(0.98);
    }
    button.adicionar { background-color: #1976D2; color: white; }
    button.mostrar { background-color: #757575; color: white; }
    button.limpar { background-color: #d32f2f; color: white; }
    button.calcular { background-color: #388e3c; color: white; }
    ul { list-style: none; padding-left: 15px; }
    #listaValores li, #divisao ul li {
      background: #f9f9f9;
      padding: 6px 10px;
      margin-bottom: 4px;
      border-radius: 4px;
      border-left: 4px solid #1976D2;
      font-size: 17px;
    }
    .verde { color: #2E7D32; font-weight: bold; }
  </style>
</head>
<body>
  <h2>üìÜ Ganhos at√© o fim do ano (145 dias √∫teis)</h2>
  <input type="number" id="valorDiario" placeholder="Valor por dia (ex: 150)" step="0.01" />
  <button class="calcular" onclick="calcularGanho()">Calcular Ganho</button>
  <p id="resultadoGanho" style="font-weight: bold;"></p>
  <hr>
  <h2>üìã Controle Financeiro</h2>
  <input type="date" id="data" />
  <input type="text" id="descricao" placeholder="Descri√ß√£o da origem" />
  <input type="number" id="valor" placeholder="Digite um valor" step="0.01" />
  <button class="adicionar" onclick="adicionarValor()">Adicionar</button>
  <button class="mostrar" onclick="alternarLista()">üëÅ Mostrar/Ocultar Valores</button>
  <button class="limpar" onclick="limparHistorico()">üßπ Limpar Hist√≥rico</button>
  <h3>Valores adicionados:</h3>
  <ul id="listaValores" style="display: none;"></ul>
  <h3>Total: R$ <span id="total">0.00</span></h3>
  <h3>Divis√£o em porcentagens:</h3>
  <div id="divisao"></div>
  <h3>üí∏ Controle de Empr√©stimos (Investimento)</h3>
  <input type="text" id="nomePessoa" placeholder="Nome da pessoa" />
  <input type="number" id="valorEmprestimo" placeholder="Valor do empr√©stimo" step="0.01" />
  <button onclick="emprestarDoInvestimento()">üí∏ Emprestar do Investimento</button>
  <ul id="listaEmprestimos"></ul>

  <script>
    function calcularGanho() {
      const valor = parseFloat(document.getElementById("valorDiario").value);
      if (isNaN(valor) || valor <= 0) {
        document.getElementById("resultadoGanho").innerText = "‚ùå Digite um valor v√°lido.";
        return;
      }
      const resultado = valor * 145;
      document.getElementById("resultadoGanho").innerText = `üí∞ Ganho estimado: R$ ${resultado.toFixed(2)} em 145 dias √∫teis.`;
    }

    let entradas = [];
    let mostrar = false;
    const porcentagens = [10, 30, 30, 30];
    const nomes = ["D√≠zimo", "Aluguel agua luz celular", "Investimento", "Conta Alimentacao"];
    let emprestimos = JSON.parse(localStorage.getItem('emprestimos')) || [];

    function salvarEntradas() {
      localStorage.setItem('entradas', JSON.stringify(entradas));
    }

    function carregarEntradas() {
      const dados = localStorage.getItem('entradas');
      if (dados) entradas = JSON.parse(dados);
    }

    function salvarInvestimento(novoValor) {
      const hoje = new Date().toISOString();
      let dadosAntigos = carregarInvestimento();
      if (!dadosAntigos) dadosAntigos = { valorInicial: 0, data: hoje };
      const valorAtualizado = dadosAntigos.valorInicial + novoValor;
      const dados = { valorInicial: valorAtualizado, data: hoje };
      localStorage.setItem('investimento', JSON.stringify(dados));
    }

    function carregarInvestimento() {
      const dados = localStorage.getItem('investimento');
      return dados ? JSON.parse(dados) : null;
    }

    function calcularInvestimentoAtualizado() {
      const dados = carregarInvestimento();
      if (!dados) return 0;
      const valorInicial = dados.valorInicial;
      const dataSalva = new Date(dados.data);
      const hoje = new Date();
      const dias = Math.floor((hoje - dataSalva) / (1000 * 60 * 60 * 24));
      return dias <= 0 ? valorInicial : valorInicial * Math.pow(1 + 0.10, dias);
    }

    function formatarData(dataStr) {
      const d = new Date(dataStr);
      return d.toLocaleDateString('pt-BR');
    }

    function atualizarLista() {
      const lista = document.getElementById('listaValores');
      lista.innerHTML = '';
      entradas.forEach(({ data, descricao, valor }) => {
        const li = document.createElement('li');
        li.textContent = `[${formatarData(data)}] ${descricao}: R$ ${valor.toFixed(2)}`;
        lista.appendChild(li);
      });
    }

    function atualizarSoma() {
      const total = entradas.reduce((acc, entrada) => acc + entrada.valor, 0);
      document.getElementById('total').textContent = total.toFixed(2);
      atualizarDivisao(total);
    }

    function atualizarDivisao(total) {
      let html = '<ul>';
      porcentagens.forEach((p, i) => {
        let valor = total * (p / 100);
        if (nomes[i] === "Investimento") valor = calcularInvestimentoAtualizado();
        html += `<li>${nomes[i]}: R$ ${valor.toFixed(2)} (${p}%)</li>`;
      });
      html += '</ul>';
      document.getElementById('divisao').innerHTML = html;
    }

    function adicionarValor() {
      const dataInput = document.getElementById('data');
      const descInput = document.getElementById('descricao');
      const valorInput = document.getElementById('valor');
      const data = dataInput.value;
      const descricao = descInput.value.trim();
      const valor = parseFloat(valorInput.value);
      if (!data || !descricao || isNaN(valor) || valor <= 0) return alert("Preencha todos os campos corretamente.");
      entradas.push({ data, descricao, valor });
      salvarEntradas();
      salvarInvestimento(valor);
      dataInput.value = new Date().toISOString().split('T')[0];
      descInput.value = '';
      valorInput.value = '';
      atualizarLista();
      atualizarSoma();
    }

    function alternarLista() {
      mostrar = !mostrar;
      document.getElementById('listaValores').style.display = mostrar ? 'block' : 'none';
    }

    function limparHistorico() {
      if (confirm("Tem certeza que deseja apagar todo o hist√≥rico?")) {
        localStorage.removeItem('entradas');
        entradas = [];
        atualizarLista();
        atualizarSoma();
        alert("Hist√≥rico apagado com sucesso!");
      }
    }

    function emprestarDoInvestimento() {
      const nome = document.getElementById('nomePessoa').value.trim();
      const valor = parseFloat(document.getElementById('valorEmprestimo').value);
      if (!nome || isNaN(valor) || valor <= 0) return alert("Preencha corretamente o nome e o valor do empr√©stimo.");
      salvarInvestimento(-valor);
      emprestimos.push({ nome, valor });
      localStorage.setItem('emprestimos', JSON.stringify(emprestimos));
      document.getElementById('nomePessoa').value = '';
      document.getElementById('valorEmprestimo').value = '';
      atualizarListaEmprestimos();
      atualizarSoma();
    }

    function atualizarListaEmprestimos() {
      const lista = document.getElementById('listaEmprestimos');
      lista.innerHTML = '';
      emprestimos.forEach((emp, index) => {
        const li = document.createElement('li');
        li.innerHTML = `${emp.nome} deve R$ ${emp.valor.toFixed(2)} <button onclick="receberEmprestimo(${index})">Receber</button>`;
        lista.appendChild(li);
      });
    }

    function receberEmprestimo(index) {
      const valor = emprestimos[index].valor;
      salvarInvestimento(valor);
      emprestimos.splice(index, 1);
      localStorage.setItem('emprestimos', JSON.stringify(emprestimos));
      atualizarListaEmprestimos();
      atualizarSoma();
    }

    window.onload = () => {
      const dataInput = document.getElementById('data');
      dataInput.value = new Date().toISOString().split('T')[0];
      carregarEntradas();
      atualizarLista();
      atualizarSoma();
      atualizarListaEmprestimos();
    };
  </script>
</body>
</html>

